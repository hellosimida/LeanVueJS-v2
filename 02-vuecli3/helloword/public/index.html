<!DOCTYPE html>
<html lang="en">
<script>
  var userAgent = navigator.userAgent;
  var isLessIE11 = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1;
  if (isLessIE11) {
    window.location = './NoSupport.html';
  }
</script>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

  <!--    <link rel="icon" href="<%= BASE_URL %>favicon.ico">-->
  <link rel="stylesheet" type="text/css" href="./style/clear.css"/>
  <title>南方小麦</title>
  <style type="text/css">
    #welcome {
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: grey;
      font-size: 14px;
    }

    #welcome .progress {
      display: none;
      height: 50px;
    }

    #welcome .welImg {
      height: 100%;
      width: 100%;
      background: white;
      overflow: hidden;
      display: none;
    }

    #welcome .welImg img {
      width: 100%;
    }

    @-webkit-keyframes animation {
      0%, 100% {
        transform: scaleY(0.4);
        -webkit-transform: scaleY(0.4);
      }
      30% {
        transform: scaleY(1.0);
        -webkit-transform: scaleY(1.0);
      }
    }

    @keyframes animation {
      0%, 100% {
        transform: scaleY(0.4);
        -webkit-transform: scaleY(0.4);
      }
      30% {
        transform: scaleY(1.0);
        -webkit-transform: scaleY(1.0);
      }
    }

    #welcome .progress div {
      background-color: dodgerblue;
      height: 100%;
      width: 6px;
      margin-right: 4px;
      display: inline-block;

      -webkit-animation: animation 1.2s infinite ease;
      animation: animation 1.2s infinite ease;
    }

    #welcome .progress .rect2 {
      -webkit-animation-delay: -1.0s;
      animation-delay: -1.0s;
    }

    #welcome .progress .rect3 {
      -webkit-animation-delay: -0.8s;
      animation-delay: -0.8s;
    }

    #welcome .progress .rect4 {
      -webkit-animation-delay: -0.6s;
      animation-delay: -0.6s;
    }

    #welcome .progress .rect5 {
      -webkit-animation-delay: -0.4s;
      animation-delay: -0.4s;
    }

    #error-button {
      display: none;
    }
  </style>
  <script>
    // 设置定时器，如果超时则停止welcome，避免 main.js 加载失败后页面一直处于加载中的问题
    setTimeout(function () {
      var welcomeElement = document.getElementById('progress');
      if (welcomeElement){
        document.body.removeChild(welcomeElement);
      }
    }, 60000);

    window.onload = function () {
      let num = Math.floor(Math.random()*3) + 1;//1到3整数
      var loadingElement = document.getElementById('img');
      if (loadingElement) {
        loadingElement.src = './image/loading_'+num+'.png';
      }
    }
  </script>
</head>
<body>
<noscript>
  <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
    Please enable it to continue.</strong>
</noscript>
<!--欢迎页面-->
<div id="welcome" class="welcome">
  <div id="progress" class="progress" v-show="!error">
    <div class="rect1"></div>
    <div class="rect2"></div>
    <div class="rect3"></div>
    <div class="rect4"></div>
    <div class="rect5"></div>
  </div>
  <div id="welImg" class="welImg">
    <img id="img"/>
  </div>
  <button id="error-button">加载失败，点击重试</button>
</div>
<!--实际app内容会替换该div，main.js初始化完成后会将 welcome 移除-->
<div id="app"></div>
</body>
</html>
